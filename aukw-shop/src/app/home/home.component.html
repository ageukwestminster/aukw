<div class="row">
  <div class="col-sm-2">
    <button routerLink="takings/add" class="btn btn-sm btn-success m-1 mt-1">
      Add New Takings
    </button>
  </div>
</div>

<div class="card mt-2 col-sm">
  <h4 class="card-header">Sales Summary</h4>
  <div class="card-body">
    <div *ngIf="loading" class="spinner-border spinner-border-sm"></div>
    <table class="table table-striped table-responsive w-auto">
      <thead>
        <tr>
          <th>Period</th>
          <th
            ngbTooltip="Sales minus expenses, rag, overage/underage and donations"
            placement="top"
            container="body"
          >
            Net Sales
          </th>
          <!-- Html in tooltip using ngTemplate from https://stackoverflow.com/a/44276662 -->
          <ng-template #footfallHtml>
            <p>Number transactions per day<br />(NET number on Z-read)</p>
          </ng-template>
          <th [ngbTooltip]="footfallHtml" placement="top" container="body">
            Footfall
          </th>
          <th>Cash</th>
          <th>CCs</th>
          <th class="d-none d-sm-table-cell">Clothing</th>
          <th class="d-none d-sm-table-cell">Brica</th>
          <th class="d-none d-sm-table-cell">Books</th>
          <th class="d-none d-sm-table-cell">Linens</th>
          <th class="d-none d-sm-table-cell">Donations</th>
          <th class="d-none d-sm-table-cell">Total</th>
          <th class="d-none d-sm-table-cell">Expenses</th>
          <th class="d-none d-sm-table-cell"># Days</th>
          <th class="d-none d-sm-table-cell"># Items Sold</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of summary">
          <th
            ngbTooltip="{{ item.type }} sales {{ item.start_date }} - {{
              item.end_date
            }}"
            placement="right"
            container="body"
          >
            {{ item.period }}
          </th>
          <td class="text-center">{{ item.net_sales | number }}</td>
          <td class="text-center">{{ item.customers_num_total }}</td>
          <td class="text-center">{{ item.cash_to_bank | number }}</td>
          <td class="text-center">{{ item.credit_cards | number }}</td>
          <td class="text-center d-none d-sm-table-cell">
            {{ item.clothing | number: "1.2-2" }}
          </td>
          <td class="text-center d-none d-sm-table-cell">
            {{ item.brica | number: "1.2-2" }}
          </td>
          <td class="text-center d-none d-sm-table-cell">
            {{ item.books | number: "1.2-2" }}
          </td>
          <td class="text-center d-none d-sm-table-cell">
            {{ item.linens | number: "1.2-2" }}
          </td>
          <td class="text-center d-none d-sm-table-cell">
            {{ item.donations | number: "1.2-2" }}
          </td>
          <td class="text-center d-none d-sm-table-cell">
            {{ item.sales_total | number: "1.2-2" }}
          </td>
          <td class="text-center d-none d-sm-table-cell">
            {{ item.expenses | number: "1.2-2" }}
          </td>
          <td class="text-center d-none d-sm-table-cell">
            {{ item.count }}
          </td>
          <td class="text-center d-none d-sm-table-cell">
            {{ item.number_of_items_sold | number }}
          </td>
        </tr>
        <tr *ngIf="!summary">
          <td colspan="2" class="text-center">
            <span class="spinner-border spinner-border-lg align-center"></span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<hr />
<sales-histogram [histogramChartData]="histogramChartData"></sales-histogram>
<hr />
<sales-chart></sales-chart>
<hr />
<monthly-sales-chart></monthly-sales-chart>
<hr />
<dept-chart></dept-chart>
<hr />
